
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc To√°n L·ªõp 2 - T·ªïng h·ª£p Ph√©p C·ªông v√† Ph√©p Tr·ª´</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif; /* S·ª≠ d·ª•ng font Inter theo h∆∞·ªõng d·∫´n */
        }
        .problem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 2rem;
            justify-items: center;
        }
        .problem-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1.5rem;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin-bottom: 1.5rem;
            position: relative;
        }
        .number {
            text-align: right;
            width: 4rem;
            padding-right: 0.5rem;
        }
        .line {
            border-bottom: 2px solid #333;
            width: 100%;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .input-group {
            display: flex;
            margin-top: 0.5rem;
        }
        .answer-input {
            width: 2.5rem;
            height: 2.5rem;
            font-size: 1.5rem;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 0.5rem; /* G√≥c bo tr√≤n */
            margin: 0 0.25rem;
        }
        .result-icon {
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 1.8rem;
            line-height: 1;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        .exercise-button {
            @apply flex flex-col items-center justify-center p-4 rounded-lg shadow-md transition duration-300 ease-in-out text-white font-bold text-lg;
            min-width: 120px;
            min-height: 100px;
        }
               /* N√∫t game */
.btn {
    display: inline-block;
    margin-top: 5px;
    padding: 10px 20px;
    font-size: 20px;
    font-weight: bold;
    color: white;
    text-decoration: none;
    border-radius: 50px;
    background: #4CAF50;
    box-shadow: 0 8px #999;
}

.btn:active {
    box-shadow: 0 3px #666;
    transform: translateY(5px);
}

.btn:hover {
    filter: brightness(1.1);
}
    </style>
</head>
<body class="bg-gradient-to-r from-blue-400 to-purple-500 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-4xl text-center">
    <a href="index.html" class="btn">üè† Quay l·∫°i Trang Ch·ªß</a>
        <h1 class="text-4xl font-bold text-gray-800 mb-6">H·ªçc To√°n L·ªõp 2</h1>
        <h2 class="text-3xl font-semibold text-blue-600 mb-8">T·ªïng h·ª£p Ph√©p C·ªông v√† Ph√©p Tr·ª´ Trong Ph·∫°m Vi 100</h2>

        <div id="homepage-view" class="hidden">
            <h3 class="text-2xl font-bold text-gray-700 mb-6">Ch·ªçn b√†i t·∫≠p</h3>
            <div id="exercise-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 justify-center">
                </div>
            <button id="clear-scores-btn" class="mt-8 bg-red-500 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out">
                X√≥a t·∫•t c·∫£ ƒëi·ªÉm
            </button>
        </div>

        <div id="exercise-view" class="hidden">
            <div id="exercise-container">
                </div>

            <div id="navigation-buttons" class="mt-8 flex justify-center space-x-4">
                <button id="prev-exercise-btn" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out hidden">
                    B√†i Tr∆∞·ªõc
                </button>
                <button id="next-exercise-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out hidden">
                    B√†i Ti·∫øp Theo
                </button>
            </div>

            <button id="back-to-home-btn" class="mt-8 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out">
                Quay l·∫°i Trang Ch·ªß
            </button>
        </div>

        <div id="final-message" class="mt-12 text-2xl font-bold text-green-700 hidden">
            Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√°c b√†i t·∫≠p!
        </div>
    </div>

    <!-- Modal for Clear Scores Confirmation -->
    <div id="confirmation-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg shadow-lg text-center">
            <p class="text-xl font-semibold mb-4">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a t·∫•t c·∫£ ƒëi·ªÉm?</p>
            <p class="mb-6">Nh·∫≠p '000' ƒë·ªÉ x√°c nh·∫≠n:</p>
            <input type="text" id="confirmation-input" class="border border-gray-300 p-2 rounded-md text-center text-lg w-32 mb-6">
            <div class="flex justify-center space-x-4">
                <button id="confirm-clear-btn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg">
                    X√°c nh·∫≠n
                </button>
                <button id="cancel-clear-btn" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg">
                    H·ªßy
                </button>
            </div>
            <p id="modal-message" class="mt-4 text-red-600 hidden"></p>
        </div>
    </div>

    <script>
        const NUM_EXERCISES = 1000;
        const QUESTIONS_PER_EXERCISE = 10;

        let currentExerciseIndex = 0;
        let exercisesData = []; // ƒê·ªÉ l∆∞u tr·ªØ c√°c s·ªë cho m·ªói b√†i to√°n
        let scores = {}; // L∆∞u tr·ªØ ƒëi·ªÉm cho m·ªói b√†i t·∫≠p, v√≠ d·ª•: { 'exercise_0': '8/10' }

        // C√°c ph·∫ßn t·ª≠ DOM
        const homepageView = document.getElementById('homepage-view');
        const exerciseView = document.getElementById('exercise-view');
        const exerciseList = document.getElementById('exercise-list');
        const exerciseContainer = document.getElementById('exercise-container');
        const prevExerciseBtn = document.getElementById('prev-exercise-btn');
        const nextExerciseBtn = document.getElementById('next-exercise-btn');
        const backToHomeBtn = document.getElementById('back-to-home-btn');
        const finalMessage = document.getElementById('final-message');
        const clearScoresBtn = document.getElementById('clear-scores-btn');

        // DOM elements for modal
        const confirmationModal = document.getElementById('confirmation-modal');
        const confirmationInput = document.getElementById('confirmation-input');
        const confirmClearBtn = document.getElementById('confirm-clear-btn');
        const cancelClearBtn = document.getElementById('cancel-clear-btn');
        const modalMessage = document.getElementById('modal-message');


        // H√†m t·∫°o s·ªë nguy√™n ng·∫´u nhi√™n trong m·ªôt ph·∫°m vi
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // H√†m t·∫°o m·ªôt b√†i to√°n c·ªông c√≥ nh·ªõ trong ph·∫°m vi 100
        function generateAdditionProblemWithCarry() {
            let num1, num2, sum;
            do {
                num1 = getRandomInt(10, 89); // ƒê·∫£m b·∫£o num1 v√† num2 l√† s·ªë c√≥ 2 ch·ªØ s·ªë
                num2 = getRandomInt(10, 89);

                const units1 = num1 % 10;
                const units2 = num2 % 10;

                // ƒê·∫£m b·∫£o t·ªïng h√†ng ƒë∆°n v·ªã >= 10 ƒë·ªÉ c√≥ nh·ªõ
                if ((units1 + units2) >= 10) {
                    sum = num1 + num2;
                    // ƒê·∫£m b·∫£o t·ªïng <= 99
                    if (sum <= 99) {
                        return { num1, num2, sum, type: 'addition' };
                    }
                }
            } while (true); // L·∫∑p l·∫°i cho ƒë·∫øn khi t·∫°o ƒë∆∞·ª£c b√†i to√°n h·ª£p l·ªá
        }

        // H√†m t·∫°o m·ªôt b√†i to√°n c·ªông kh√¥ng nh·ªõ trong ph·∫°m vi 100
        function generateAdditionProblemNoCarry() {
            let num1, num2, sum;
            do {
                num1 = getRandomInt(10, 89); // ƒê·∫£m b·∫£o num1 v√† num2 l√† s·ªë c√≥ 2 ch·ªØ s·ªë
                num2 = getRandomInt(10, 89);

                const units1 = num1 % 10;
                const units2 = num2 % 10;

                // ƒê·∫£m b·∫£o t·ªïng h√†ng ƒë∆°n v·ªã < 10 ƒë·ªÉ kh√¥ng c√≥ nh·ªõ
                if ((units1 + units2) < 10) {
                    sum = num1 + num2;
                    // ƒê·∫£m b·∫£o t·ªïng <= 99
                    if (sum <= 99) {
                        return { num1, num2, sum, type: 'addition' };
                    }
                }
            } while (true); // L·∫∑p l·∫°i cho ƒë·∫øn khi t·∫°o ƒë∆∞·ª£c b√†i to√°n h·ª£p l·ªá
        }

        // H√†m t·∫°o m·ªôt b√†i to√°n tr·ª´ c√≥ nh·ªõ trong ph·∫°m vi 100
        function generateSubtractionProblemWithBorrow() {
            let num1, num2, difference;
            do {
                num1 = getRandomInt(20, 99); // S·ªë b·ªã tr·ª´ t·ª´ 20 ƒë·∫øn 99
                num2 = getRandomInt(10, num1 - 1); // S·ªë tr·ª´ nh·ªè h∆°n s·ªë b·ªã tr·ª´ v√† l√† s·ªë c√≥ 2 ch·ªØ s·ªë

                const units1 = num1 % 10;
                const units2 = num2 % 10;

                // ƒê·∫£m b·∫£o h√†ng ƒë∆°n v·ªã c·ªßa s·ªë b·ªã tr·ª´ nh·ªè h∆°n h√†ng ƒë∆°n v·ªã c·ªßa s·ªë tr·ª´ ƒë·ªÉ c√≥ nh·ªõ
                if (units1 < units2) {
                    difference = num1 - num2;
                    // ƒê·∫£m b·∫£o hi·ªáu l√† s·ªë d∆∞∆°ng v√† c·∫£ hai s·ªë ƒë·ªÅu l√† 2 ch·ªØ s·ªë
                    if (difference >= 0 && num1 >= 10 && num2 >= 10) {
                        return { num1, num2, difference, type: 'subtraction' };
                    }
                }
            } while (true); // L·∫∑p l·∫°i cho ƒë·∫øn khi t·∫°o ƒë∆∞·ª£c b√†i to√°n h·ª£p l·ªá
        }

        // H√†m t·∫°o m·ªôt b√†i to√°n tr·ª´ kh√¥ng nh·ªõ trong ph·∫°m vi 100
        function generateSubtractionProblemNoBorrow() {
            let num1, num2, difference;
            do {
                num1 = getRandomInt(20, 99); // S·ªë b·ªã tr·ª´ t·ª´ 20 ƒë·∫øn 99
                num2 = getRandomInt(10, num1 - 1); // S·ªë tr·ª´ nh·ªè h∆°n s·ªë b·ªã tr·ª´ v√† l√† s·ªë c√≥ 2 ch·ªØ s·ªë

                const units1 = num1 % 10;
                const units2 = num2 % 10;
                const tens1 = Math.floor(num1 / 10);
                const tens2 = Math.floor(num2 / 10);

                // ƒê·∫£m b·∫£o kh√¥ng c·∫ßn nh·ªõ ·ªü c·∫£ h√†ng ƒë∆°n v·ªã v√† h√†ng ch·ª•c
                if (units1 >= units2 && tens1 >= tens2) {
                    difference = num1 - num2;
                    // ƒê·∫£m b·∫£o hi·ªáu l√† s·ªë d∆∞∆°ng v√† c·∫£ hai s·ªë ƒë·ªÅu l√† 2 ch·ªØ s·ªë
                    if (difference >= 0 && num1 >= 10 && num2 >= 10) {
                        return { num1, num2, difference, type: 'subtraction' };
                    }
                }
            } while (true); // L·∫∑p l·∫°i cho ƒë·∫øn khi t·∫°o ƒë∆∞·ª£c b√†i to√°n h·ª£p l·ªá
        }

        // H√†m t·∫°o m·ªôt b√†i to√°n t·ªïng h·ª£p (c·ªông/tr·ª´, c√≥/kh√¥ng nh·ªõ)
        function generateMixedProblem() {
            const problemGenerators = [
                generateAdditionProblemWithCarry,
                generateAdditionProblemNoCarry,
                generateSubtractionProblemWithBorrow,
                generateSubtractionProblemNoBorrow
            ];
            const randomIndex = getRandomInt(0, problemGenerators.length - 1);
            return problemGenerators[randomIndex]();
        }

        // H√†m l∆∞u ƒëi·ªÉm v√†o localStorage
        function saveScores() {
            localStorage.setItem('mathScores', JSON.stringify(scores));
        }

        // H√†m t·∫£i ƒëi·ªÉm t·ª´ localStorage
        function loadScores() {
            const storedScores = localStorage.getItem('mathScores');
            if (storedScores) {
                scores = JSON.parse(storedScores);
            }
        }

        // H√†m hi·ªÉn th·ªã trang ch·ªß v·ªõi danh s√°ch b√†i t·∫≠p
        function renderHomepage() {
            homepageView.classList.remove('hidden');
            exerciseView.classList.add('hidden');
            finalMessage.classList.add('hidden');
            exerciseList.innerHTML = ''; // X√≥a danh s√°ch tr∆∞·ªõc ƒë√≥

            for (let i = 0; i < NUM_EXERCISES; i++) {
                const exerciseId = `exercise_${i}`;
                const currentScore = scores[exerciseId] || `0/${QUESTIONS_PER_EXERCISE}`;
                let buttonClass = 'bg-blue-500 hover:bg-blue-600'; // M√†u m·∫∑c ƒë·ªãnh

                if (currentScore === `${QUESTIONS_PER_EXERCISE}/${QUESTIONS_PER_EXERCISE}`) {
                    buttonClass = 'bg-green-500 hover:bg-green-600'; // T·∫•t c·∫£ ƒë√∫ng
                } else if (currentScore !== `0/${QUESTIONS_PER_EXERCISE}` && currentScore.includes('/')) {
                    // Ki·ªÉm tra n·∫øu ƒëi·ªÉm kh√¥ng ph·∫£i 0/10 nh∆∞ng c≈©ng kh√¥ng ph·∫£i 10/10
                    const [correct, total] = currentScore.split('/').map(Number);
                    if (correct > 0) {
                        buttonClass = 'bg-yellow-500 hover:bg-yellow-600'; // ƒê√£ th·ª≠ nh∆∞ng ch∆∞a ho√†n h·∫£o
                    }
                }

                const exerciseButton = document.createElement('button');
                exerciseButton.className = `exercise-button ${buttonClass}`;
                exerciseButton.innerHTML = `B√†i ${i + 1}<br><span class="text-sm mt-1">ƒêi·ªÉm: ${currentScore}</span>`;
                exerciseButton.dataset.exerciseIndex = i;
                exerciseButton.addEventListener('click', () => showExercise(i));
                exerciseList.appendChild(exerciseButton);
            }
        }

        // H√†m hi·ªÉn th·ªã m·ªôt b√†i t·∫≠p c·ª• th·ªÉ
        function showExercise(index) {
            currentExerciseIndex = index;
            homepageView.classList.add('hidden');
            exerciseView.classList.remove('hidden');
            renderExercise(currentExerciseIndex);
        }

        // H√†m x·ª≠ l√Ω ƒë·∫ßu v√†o trong tr∆∞·ªùng h√†ng ƒë∆°n v·ªã v√† t·ª± ƒë·ªông focus h√†ng ch·ª•c
        function handleUnitsInput(inputElement) {
            // N·∫øu m·ªôt ch·ªØ s·ªë ƒë√£ ƒë∆∞·ª£c nh·∫≠p v√†o tr∆∞·ªùng ƒë∆°n v·ªã
            if (inputElement.value.length === 1) {
                const problemIndex = inputElement.dataset.problemIndex;
                // T√¨m tr∆∞·ªùng nh·∫≠p h√†ng ch·ª•c t∆∞∆°ng ·ª©ng cho b√†i to√°n n√†y
                const tensInput = document.querySelector(`input.tens-input[data-problem-index="${problemIndex}"]`);
                // N·∫øu t√¨m th·∫•y, focus v√†o n√≥
                if (tensInput) {
                    tensInput.focus();
                }
            }
        }

        // H√†m hi·ªÉn th·ªã m·ªôt b√†i t·∫≠p
        function renderExercise(exerciseIndex) {
            exerciseContainer.innerHTML = ''; // X√≥a b√†i t·∫≠p tr∆∞·ªõc ƒë√≥

            const exercise = exercisesData[exerciseIndex];
            if (!exercise) {
                console.error("Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu b√†i t·∫≠p cho ch·ªâ m·ª•c:", exerciseIndex);
                return;
            }

            const exerciseDiv = document.createElement('div');
            exerciseDiv.className = 'exercise mb-8 p-6 bg-blue-50 rounded-lg shadow-md';
            exerciseDiv.innerHTML = `
                <h3 class="text-2xl font-bold text-gray-700 mb-6">B√†i t·∫≠p ${exerciseIndex + 1}</h3>
                <div class="problem-grid" id="problems-grid-${exerciseIndex}"></div>
                <div class="mt-8 flex justify-center">
                    <button class="check-answers-btn bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out mr-4">
                        Ki·ªÉm tra ƒë√°p √°n
                    </button>
                    <span class="score-display text-xl font-semibold text-gray-700">ƒêi·ªÉm: ${scores[`exercise_${exerciseIndex}`] || `0/${QUESTIONS_PER_EXERCISE}`}</span>
                </div>
            `;
            exerciseContainer.appendChild(exerciseDiv);

            const problemsGrid = document.getElementById(`problems-grid-${exerciseIndex}`);

            exercise.problems.forEach((problem, problemIndex) => {
                const operator = problem.type === 'addition' ? '+' : '-';
                const correctAnswer = problem.type === 'addition' ? problem.sum : problem.difference;

                const problemItem = document.createElement('div');
                problemItem.className = 'problem-item';
                problemItem.innerHTML = `
                    <div class="number">${problem.num1}</div>
                    <div class="number flex justify-between items-center w-full">
                        <span class="mr-2">${operator}</span>${problem.num2}
                    </div>
                    <div class="line"></div>
                    <div class="input-group">
                        <input type="text" maxlength="1" class="answer-input tens-input" data-problem-index="${problemIndex}" data-digit="tens" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 1)">
                        <input type="text" maxlength="1" class="answer-input units-input" data-problem-index="${problemIndex}" data-digit="units" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 1); handleUnitsInput(this);">
                    </div>
                    <div class="result-icon" id="result-icon-${exerciseIndex}-${problemIndex}"></div>
                `;
                problemsGrid.appendChild(problemItem);
            });

            // Th√™m tr√¨nh nghe s·ª± ki·ªán ƒë·ªÉ ki·ªÉm tra c√¢u tr·∫£ l·ªùi
            exerciseDiv.querySelector('.check-answers-btn').addEventListener('click', () => checkAnswers(exerciseIndex));

            updateNavigationButtons();
        }

        // H√†m ki·ªÉm tra c√¢u tr·∫£ l·ªùi cho b√†i t·∫≠p hi·ªán t·∫°i
        function checkAnswers(exerciseIndex) {
            const exercise = exercisesData[exerciseIndex];
            if (!exercise) return;

            let correctCount = 0;
            exercise.problems.forEach((problem, problemIndex) => {
                const tensInput = document.querySelector(`#problems-grid-${exerciseIndex} input.tens-input[data-problem-index="${problemIndex}"]`);
                const unitsInput = document.querySelector(`#problems-grid-${exerciseIndex} input.units-input[data-problem-index="${problemIndex}"]`);
                const resultIcon = document.getElementById(`result-icon-${exerciseIndex}-${problemIndex}`);

                const userAnswerTens = tensInput.value;
                const userAnswerUnits = unitsInput.value;
                const userAnswer = parseInt(`${userAnswerTens || '0'}${userAnswerUnits || '0'}`); // K·∫øt h·ª£p v√† ph√¢n t√≠ch

                const correctAnswer = problem.type === 'addition' ? problem.sum : problem.difference;

                // X√≥a tr·∫°ng th√°i tr∆∞·ªõc ƒë√≥
                resultIcon.innerHTML = '';
                resultIcon.classList.remove('correct', 'incorrect');

                if (userAnswer === correctAnswer && String(userAnswer).length === String(correctAnswer).length) {
                    resultIcon.innerHTML = '&#10003;'; // D·∫•u t√≠ch
                    resultIcon.classList.add('correct');
                    correctCount++;
                } else {
                    resultIcon.innerHTML = '&#10007;'; // D·∫•u X
                    resultIcon.classList.add('incorrect');
                }
            });

            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã ƒëi·ªÉm cho b√†i t·∫≠p hi·ªán t·∫°i
            const currentScoreDisplay = `${correctCount}/${QUESTIONS_PER_EXERCISE}`;
            exerciseContainer.querySelector('.score-display').textContent = `ƒêi·ªÉm: ${currentScoreDisplay}`;

            // L∆∞u ƒëi·ªÉm
            scores[`exercise_${exerciseIndex}`] = currentScoreDisplay;
            saveScores();

            const allPerfect = Object.values(scores).every(score => score === `${QUESTIONS_PER_EXERCISE}/${QUESTIONS_PER_EXERCISE}`);
            if (allPerfect && Object.keys(scores).length === NUM_EXERCISES) {
                 finalMessage.classList.remove('hidden');
            }
        }

        // H√†m c·∫≠p nh·∫≠t kh·∫£ nƒÉng hi·ªÉn th·ªã c·ªßa c√°c n√∫t ƒëi·ªÅu h∆∞·ªõng
        function updateNavigationButtons() {
            prevExerciseBtn.classList.add('hidden');
            nextExerciseBtn.classList.add('hidden');

            if (currentExerciseIndex > 0) {
                prevExerciseBtn.classList.remove('hidden');
            }
            if (currentExerciseIndex < NUM_EXERCISES - 1) {
                nextExerciseBtn.classList.remove('hidden');
            }
        }

        // Event listener for "Clear All Scores" button
        clearScoresBtn.addEventListener('click', () => {
            confirmationModal.classList.remove('hidden');
            confirmationInput.value = ''; // Clear previous input
            modalMessage.classList.add('hidden'); // Hide previous message
            confirmationInput.focus();
        });

        // Event listener for Confirm button in modal
        confirmClearBtn.addEventListener('click', () => {
            if (confirmationInput.value === '000') {
                localStorage.removeItem('mathScores');
                scores = {};
                renderHomepage();
                confirmationModal.classList.add('hidden');
            } else {
                modalMessage.textContent = "M√£ x√°c nh·∫≠n kh√¥ng ƒë√∫ng.";
                modalMessage.classList.remove('hidden');
            }
        });

        // Event listener for Cancel button in modal
        cancelClearBtn.addEventListener('click', () => {
            confirmationModal.classList.add('hidden');
        });

        // Tr√¨nh nghe s·ª± ki·ªán cho ƒëi·ªÅu h∆∞·ªõng
        prevExerciseBtn.addEventListener('click', () => {
            if (currentExerciseIndex > 0) {
                showExercise(currentExerciseIndex - 1);
            }
        });

        nextExerciseBtn.addEventListener('click', () => {
            if (currentExerciseIndex < NUM_EXERCISES - 1) {
                showExercise(currentExerciseIndex + 1);
            }
        });

        backToHomeBtn.addEventListener('click', renderHomepage);

        // Kh·ªüi t·∫°o b√†i t·∫≠p v√† t·∫£i ƒëi·ªÉm
        function initializeApplication() {
            loadScores(); // T·∫£i ƒëi·ªÉm tr∆∞·ªõc

            // T·∫°o t·∫•t c·∫£ c√°c b√†i to√°n ch·ªâ m·ªôt l·∫ßn n·∫øu ch∆∞a ƒë∆∞·ª£c t·∫°o (ƒë·ªÉ duy tr√¨ gi·ªØa c√°c phi√™n)
            if (exercisesData.length === 0) {
                for (let i = 0; i < NUM_EXERCISES; i++) {
                    let problems = [];
                    for (let j = 0; j < QUESTIONS_PER_EXERCISE; j++) {
                        problems.push(generateMixedProblem()); // Thay ƒë·ªïi h√†m t·∫°o b√†i to√°n
                    }
                    exercisesData.push({ id: i, problems: problems });
                }
            }

            renderHomepage(); // Hi·ªÉn th·ªã trang ch·ªß ban ƒë·∫ßu
        }

        // B·∫Øt ƒë·∫ßu ·ª©ng d·ª•ng khi DOM ƒë∆∞·ª£c t·∫£i ƒë·∫ßy ƒë·ªß
        document.addEventListener('DOMContentLoaded', () => {
            initializeApplication();
        });

    </script>
<!-- Cloudflare Pages Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "eed08efb2b414db28f2f6473bf39c1a2"}'></script><!-- Cloudflare Pages Analytics --></body>
</html>
